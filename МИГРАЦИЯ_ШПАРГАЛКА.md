# üöÄ –ë–´–°–¢–†–ê–Ø –°–ü–†–ê–í–ö–ê: –ú–∏–≥—Ä–∞—Ü–∏—è Google —Ç–∞–±–ª–∏—Ü—ã

## üìù –ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç

### –ß—Ç–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å:

- ‚úÖ ID Google —Ç–∞–±–ª–∏—Ü—ã –≤ backend (2 —Ñ–∞–π–ª–∞)
- ‚úÖ Deployment URL –≤–æ frontend (1 —Ñ–∞–π–ª)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –£–∑–Ω–∞—Ç—å ID –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∏–∑ URL:

```
https://docs.google.com/spreadsheets/d/–í–ê–®–ò_ID_–ó–î–ï–°–¨/edit
                                      ‚Üë----------‚Üë
```

### 2Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ ID

```bash
cd /Users/yan/Documents/.../referal_system_marina_talko
./replace_spreadsheet_id.sh –ù–û–í–´–ô_ID
```

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
./check_migration.sh
```

### 4Ô∏è‚É£ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
2. Extensions ‚Üí Apps Script
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ `.gs` —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `backend/`
4. Deploy ‚Üí New deployment ‚Üí Web app
5. Execute as: **Me**
6. Who has access: **Anyone**
7. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π Deployment URL

### 5Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç—å frontend

–û—Ç–∫—Ä–æ–π—Ç–µ `docs/config.js`, –∑–∞–º–µ–Ω–∏—Ç–µ:

```javascript
API_URL: "https://script.google.com/macros/s/–ù–û–í–´–ô_DEPLOYMENT_ID/exec";
```

### 6Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã

–í Apps Script —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ ‚Üí Triggers ‚Üí Add trigger:

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä:**

- Function: `masterTrigger`
- Event type: From spreadsheet
- Event: On change

**–î–ª—è –º–µ–Ω—é:**

- Function: `onOpen`
- Event type: From spreadsheet
- Event: On open

---

## üìÇ –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Backend (2 —Ñ–∞–π–ª–∞):

```
backend/doGet.gs           ‚Üí 3 –º–µ—Å—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 65, 73, 84)
backend/ssr_renderer.gs    ‚Üí 1 –º–µ—Å—Ç–æ (—Å—Ç—Ä–æ–∫–∞ 14)
```

### Frontend (1 —Ñ–∞–π–ª):

```
docs/config.js             ‚Üí —Å—Ç—Ä–æ–∫–∞ 2 (API_URL)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤ Apps Script:

```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
testTableStructure();

// 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
testTablesStructure();

// 3. –¢–µ—Å—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
testReferalCalculation("227290741");
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå "Reference Error: function is not defined"

‚Üí –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–ï `.gs` —Ñ–∞–π–ª—ã –≤ Apps Script

### ‚ùå "Access denied"

‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

- Execute as: **Me**
- Who has access: **Anyone**

### ‚ùå –¢—Ä–∏–≥–≥–µ—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

‚Üí –°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤—Ä—É—á–Ω—É—é (Triggers ‚Üí Add trigger)

### ‚ùå Frontend –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Deployment URL –≤ `docs/config.js`

---

## üìû –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º.: `–ú–ò–ì–†–ê–¶–ò–Ø_–¢–ê–ë–õ–ò–¶–´.md`

---

**–°–æ–∑–¥–∞–Ω–æ**: 05.01.2026
